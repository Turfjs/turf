!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.martinez=t()}}(function(){return function t(e,r,n){function o(u,f){if(!r[u]){if(!e[u]){var l="function"==typeof require&&require;if(!f&&l)return l(u,!0);if(i)return i(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[u]={exports:{}};e[u][0].call(c.exports,function(t){var r=e[u][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,e,r){"use strict";var n=t("./src/index");e.exports={union:n.union,diff:n.diff,xor:n.xor,intersection:n.intersection}},{"./src/index":8}],2:[function(t,e,r){"use strict";function n(t,e,r,n,o,i){this._color=t,this.key=e,this.value=r,this.left=n,this.right=o,this._count=i}function o(t){return new n(t._color,t.key,t.value,t.left,t.right,t._count)}function i(t,e){return new n(t,e.key,e.value,e.left,e.right,e._count)}function u(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function f(t,e){this._compare=t,this.root=e}function l(t,e){if(e.left){var r=l(t,e.left);if(r)return r}var r=t(e.key,e.value);return r?r:e.right?l(t,e.right):void 0}function h(t,e,r,n){var o=e(t,n.key);if(0>=o){if(n.left){var i=h(t,e,r,n.left);if(i)return i}var i=r(n.key,n.value);if(i)return i}return n.right?h(t,e,r,n.right):void 0}function c(t,e,r,n,o){var i,u=r(t,o.key),f=r(e,o.key);if(0>=u){if(o.left&&(i=c(t,e,r,n,o.left)))return i;if(f>0&&(i=n(o.key,o.value)))return i}return f>0&&o.right?c(t,e,r,n,o.right):void 0}function s(t,e){this.tree=t,this._stack=e}function a(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function p(t){for(var e,r,n,f,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=d);if(r=t[l-1],r.left===e){if(n=r.right,n.right&&n.right._color===_){if(n=r.right=o(n),f=n.right=o(n.right),r.right=n.left,n.left=r,n.right=f,n._color=r._color,e._color=d,r._color=d,f._color=d,u(r),u(n),l>1){var h=t[l-2];h.left===r?h.left=n:h.right=n}return void(t[l-1]=n)}if(n.left&&n.left._color===_){if(n=r.right=o(n),f=n.left=o(n.left),r.right=f.left,n.left=f.right,f.left=r,f.right=n,f._color=r._color,r._color=d,n._color=d,e._color=d,u(r),u(n),u(f),l>1){var h=t[l-2];h.left===r?h.left=f:h.right=f}return void(t[l-1]=f)}if(n._color===d){if(r._color===_)return r._color=d,void(r.right=i(_,n));r.right=i(_,n);continue}if(n=o(n),r.right=n.left,n.left=r,n._color=r._color,r._color=_,u(r),u(n),l>1){var h=t[l-2];h.left===r?h.left=n:h.right=n}t[l-1]=n,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if(n=r.left,n.left&&n.left._color===_){if(n=r.left=o(n),f=n.left=o(n.left),r.left=n.right,n.right=r,n.left=f,n._color=r._color,e._color=d,r._color=d,f._color=d,u(r),u(n),l>1){var h=t[l-2];h.right===r?h.right=n:h.left=n}return void(t[l-1]=n)}if(n.right&&n.right._color===_){if(n=r.left=o(n),f=n.right=o(n.right),r.left=f.right,n.right=f.left,f.right=r,f.left=n,f._color=r._color,r._color=d,n._color=d,e._color=d,u(r),u(n),u(f),l>1){var h=t[l-2];h.right===r?h.right=f:h.left=f}return void(t[l-1]=f)}if(n._color===d){if(r._color===_)return r._color=d,void(r.left=i(_,n));r.left=i(_,n);continue}if(n=o(n),r.left=n.right,n.right=r,n._color=r._color,r._color=_,u(r),u(n),l>1){var h=t[l-2];h.right===r?h.right=n:h.left=n}t[l-1]=n,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}function v(t,e){return e>t?-1:t>e?1:0}function g(t){return new f(t||v,null)}e.exports=g;var _=0,d=1,y=f.prototype;Object.defineProperty(y,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(y,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(t,e){for(var r=this._compare,o=this.root,l=[],h=[];o;){var c=r(t,o.key);l.push(o),h.push(c),o=0>=c?o.left:o.right}l.push(new n(_,t,e,null,null,1));for(var s=l.length-2;s>=0;--s){var o=l[s];h[s]<=0?l[s]=new n(o._color,o.key,o.value,l[s+1],o.right,o._count+1):l[s]=new n(o._color,o.key,o.value,o.left,l[s+1],o._count+1)}for(var s=l.length-1;s>1;--s){var a=l[s-1],o=l[s];if(a._color===d||o._color===d)break;var p=l[s-2];if(p.left===a)if(a.left===o){var v=p.right;if(!v||v._color!==_){if(p._color=_,p.left=a.right,a._color=d,a.right=p,l[s-2]=a,l[s-1]=o,u(p),u(a),s>=3){var g=l[s-3];g.left===p?g.left=a:g.right=a}break}a._color=d,p.right=i(d,v),p._color=_,s-=1}else{var v=p.right;if(!v||v._color!==_){if(a.right=o.left,p._color=_,p.left=o.right,o._color=d,o.left=a,o.right=p,l[s-2]=o,l[s-1]=a,u(p),u(a),u(o),s>=3){var g=l[s-3];g.left===p?g.left=o:g.right=o}break}a._color=d,p.right=i(d,v),p._color=_,s-=1}else if(a.right===o){var v=p.left;if(!v||v._color!==_){if(p._color=_,p.right=a.left,a._color=d,a.left=p,l[s-2]=a,l[s-1]=o,u(p),u(a),s>=3){var g=l[s-3];g.right===p?g.right=a:g.left=a}break}a._color=d,p.left=i(d,v),p._color=_,s-=1}else{var v=p.left;if(!v||v._color!==_){if(a.left=o.right,p._color=_,p.right=o.left,o._color=d,o.right=a,o.left=p,l[s-2]=o,l[s-1]=a,u(p),u(a),u(o),s>=3){var g=l[s-3];g.right===p?g.right=o:g.left=o}break}a._color=d,p.left=i(d,v),p._color=_,s-=1}}return l[0]._color=d,new f(r,l[0])},y.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return l(t,this.root);case 2:return h(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return c(e,r,this._compare,t,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new s(this,t)}}),Object.defineProperty(y,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new s(this,t)}}),y.at=function(t){if(0>t)return new s(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new s(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new s(this,[])},y.ge=function(t){for(var e=this._compare,r=this.root,n=[],o=0;r;){var i=e(t,r.key);n.push(r),0>=i&&(o=n.length),r=0>=i?r.left:r.right}return n.length=o,new s(this,n)},y.gt=function(t){for(var e=this._compare,r=this.root,n=[],o=0;r;){var i=e(t,r.key);n.push(r),0>i&&(o=n.length),r=0>i?r.left:r.right}return n.length=o,new s(this,n)},y.lt=function(t){for(var e=this._compare,r=this.root,n=[],o=0;r;){var i=e(t,r.key);n.push(r),i>0&&(o=n.length),r=0>=i?r.left:r.right}return n.length=o,new s(this,n)},y.le=function(t){for(var e=this._compare,r=this.root,n=[],o=0;r;){var i=e(t,r.key);n.push(r),i>=0&&(o=n.length),r=0>i?r.left:r.right}return n.length=o,new s(this,n)},y.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var o=e(t,r.key);if(n.push(r),0===o)return new s(this,n);r=0>=o?r.left:r.right}return new s(this,[])},y.remove=function(t){var e=this.find(t);return e?e.remove():this},y.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=0>=n?r.left:r.right}};var E=s.prototype;Object.defineProperty(E,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(E,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),E.clone=function(){return new s(this.tree,this._stack.slice())},E.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new n(r._color,r.key,r.value,r.left,r.right,r._count);for(var o=t.length-2;o>=0;--o){var r=t[o];r.left===t[o+1]?e[o]=new n(r._color,r.key,r.value,e[o+1],r.right,r._count):e[o]=new n(r._color,r.key,r.value,r.left,e[o+1],r._count)}if(r=e[e.length-1],r.left&&r.right){var i=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var u=e[i-1];e.push(new n(r._color,u.key,u.value,r.left,r.right,r._count)),e[i-1].key=r.key,e[i-1].value=r.value;for(var o=e.length-2;o>=i;--o)r=e[o],e[o]=new n(r._color,r.key,r.value,r.left,e[o+1],r._count);e[i-1].left=e[i]}if(r=e[e.length-1],r._color===_){var l=e[e.length-2];l.left===r?l.left=null:l.right===r&&(l.right=null),e.pop();for(var o=0;o<e.length;++o)e[o]._count--;return new f(this.tree._compare,e[0])}if(r.left||r.right){r.left?a(r,r.left):r.right&&a(r,r.right),r._color=d;for(var o=0;o<e.length-1;++o)e[o]._count--;return new f(this.tree._compare,e[0])}if(1===e.length)return new f(this.tree._compare,null);for(var o=0;o<e.length;++o)e[o]._count--;var h=e[e.length-2];return p(e),h.left===r?h.left=null:h.right=null,new f(this.tree._compare,e[0])},Object.defineProperty(E,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(E,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(E,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),E.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(E,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),E.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),o=e[e.length-1];r[r.length-1]=new n(o._color,o.key,t,o.left,o.right,o._count);for(var i=e.length-2;i>=0;--i)o=e[i],o.left===e[i+1]?r[i]=new n(o._color,o.key,o.value,r[i+1],o.right,o._count):r[i]=new n(o._color,o.key,o.value,o.left,r[i+1],o._count);return new f(this.tree._compare,r[0])},E.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(E,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],3:[function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||o,t)for(var r=Math.floor(this.length/2);r>=0;r--)this._down(r)}function o(t,e){return e>t?-1:t>e?1:0}function i(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}e.exports=n,n.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare;t>0;){var n=Math.floor((t-1)/2);if(!(r(e[t],e[n])<0))break;i(e,n,t),t=n}},_down:function(t){for(var e=this.data,r=this.compare,n=this.length;;){var o=2*t+1,u=o+1,f=t;if(n>o&&r(e[o],e[f])<0&&(f=o),n>u&&r(e[u],e[f])<0&&(f=u),f===t)return;i(e,f,t),t=f}}}},{}],4:[function(t,e,r){"use strict";function n(t,e,r,n){return t.left!==e.left?t.left?1:-1:0!==o(r,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}var o=t("./signed_area");e.exports=function(t,e){var r=t.point,o=e.point;return r[0]>o[0]?1:r[0]<o[0]?-1:r[1]!==o[1]?r[1]>o[1]?1:-1:n(t,e,r,o)}},{"./signed_area":10}],5:[function(t,e,r){"use strict";var n=t("./signed_area"),o=t("./compare_events"),i=t("./equals");e.exports=function(t,e){return t===e?0:0!==n(t.point,t.otherEvent.point,e.point)||0!==n(t.point,t.otherEvent.point,e.otherEvent.point)?i(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===o(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1:t.isSubject!==e.isSubject?t.isSubject?-1:1:i(t.point,e.point)?i(t.otherEvent.point,e.otherEvent.point)?0:t.contourId>e.contourId?1:-1:1===o(t,e)?1:-1}},{"./compare_events":4,"./equals":7,"./signed_area":10}],6:[function(t,e,r){"use strict";e.exports={NORMAL:0,NON_CONTRIBUTING:1,SAME_TRANSITION:2,DIFFERENT_TRANSITION:3}},{}],7:[function(t,e,r){"use strict";e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},{}],8:[function(t,e,r){"use strict";function n(t,e,r,n,o,i,u){var f=new w(t,!1,void 0,r),l=new w(e,!1,f,r);f.otherEvent=l,f.contourId=l.contourId=n,u||(f.isExteriorRing=!1,l.isExteriorRing=!1),b(f,l)>0?l.left=!0:f.left=!0,i[0]=A(i[0],t[0]),i[1]=A(i[1],t[1]),i[2]=T(i[2],t[0]),i[3]=T(i[3],t[1]),o.push(f),o.push(l)}function o(t,e,r,o,i,u){var f,l;for(f=0,l=t.length-1;l>f;f++)n(t[f],t[f+1],e,r+1,o,i,u)}function i(t,e,r,n){var i=new y(null,b);return t.forEach(function(t,e){t.forEach(function(t,e){var n=0===e?!0:!1;n||M++,o(t,!0,M,i,r,n)})}),e.forEach(function(t){t.forEach(function(t,e){var r=0===e?!0:!1;r||M++,o(t,!1,M,i,n,r)})}),i}function u(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!f(e,r)||e.isVertical()?e.prevInResult:e)),t.inResult=f(t,r)}function f(t,e){switch(t.type){case k.NORMAL:switch(e){case x:return!t.otherInOut;case N:return t.otherInOut;case R:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case j:return!0}break;case k.SAME_TRANSITION:return e===x||e===N;case k.DIFFERENT_TRANSITION:return e===R;case k.NON_CONTRIBUTING:return!1}return!1}function l(t,e,r){var n=m(t.point,t.otherEvent.point,e.point,e.otherEvent.point),o=n?n.length:0;if(0===o)return 0;if(1===o&&(I(t.point,e.point)||I(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===o&&t.isSubject===e.isSubject)return 0;if(1===o)return I(t.point,n[0])||I(t.otherEvent.point,n[0])||h(t,n[0],r),I(e.point,n[0])||I(e.otherEvent.point,n[0])||h(e,n[0],r),1;var i=[],u=!1,f=!1;return I(t.point,e.point)?u=!0:1===b(t,e)?i.push(e,t):i.push(t,e),I(t.otherEvent.point,e.otherEvent.point)?f=!0:1===b(t.otherEvent,e.otherEvent)?i.push(e.otherEvent,t.otherEvent):i.push(t.otherEvent,e.otherEvent),u&&f||u?(t.type=k.NON_CONTRIBUTING,e.type=t.inOut===e.inOut?k.SAME_TRANSITION:k.DIFFERENT_TRANSITION,u&&!f&&h(i[0].otherEvent,i[1].point,r),2):f?(h(i[0],i[1].point,r),3):i[0]!==i[3].otherEvent?(h(i[0],i[1].point,r),h(i[1],i[2].point,r),3):(h(i[0],i[1].point,r),h(i[3].otherEvent,i[2].point,r),3)}function h(t,e,r){var n=new w(e,!1,t,t.isSubject),o=new w(e,!0,t.otherEvent,t.isSubject);return I(t.point,t.otherEvent.point)&&console.warn("what is that?",t),n.contourId=o.contourId=t.contourId,b(o,t.otherEvent)>0&&(t.otherEvent.left=!0,o.left=!1),t.otherEvent.otherEvent=o,t.otherEvent=n,r.push(o),r.push(n),r}function c(t,e,r,n,o,i){for(var f,h,c=new E(O),s=[],a=A(n[2],o[2]);t.length;){var p=t.pop();if(s.push(p),i===x&&p.point[0]>a||i===R&&p.point[0]>n[2])break;if(p.left){c=c.insert(p),h=c.find(p),f=c.find(p),p.iterator=c.find(p),f.node!==c.begin?f.prev():(f=c.begin,f.prev(),f.next()),h.next();var v,g=f.key||null;if(u(p,g,i),h.node&&2===l(p,h.key,t)&&(u(p,g,i),u(p,h.key,i)),f.node&&2===l(f.key,p,t)){var _=c.find(f.key);_.node!==c.begin?_.prev():(_=c.find(c.end),_.next()),v=_.key||null,u(g,v,i),u(p,g,i)}}else{if(p=p.otherEvent,h=c.find(p),f=c.find(p),!f||!h)continue;f.node!==c.begin?f.prev():(f=c.begin,f.prev(),f.next()),h.next(),c=c.remove(p),h.node&&f.node&&"undefined"!=typeof f.node.value&&"undefined"!=typeof h.node.value&&l(f.key,h.key,t)}}return s}function s(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function a(t){var e,r,n,o=[];for(r=0,n=t.length;n>r;r++)e=t[r],(e.left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var i=!1;!i;)for(i=!0,r=0,n=o.length;n>r;r++)n>r+1&&1===b(o[r],o[r+1])&&(s(o,r,r+1),i=!1);for(r=0,n=o.length;n>r;r++)o[r].pos=r;for(r=0,n=o.length;n>r;r++)if(!o[r].left){var u=o[r].pos;o[r].pos=o[r].otherEvent.pos,o[r].otherEvent.pos=u}return o}function p(t){var e,r,n=a(t),o=Array(n.length),i=[];for(e=0,r=n.length;r>e;e++)if(!o[e]){var u=[[]];n[e].isExteriorRing?i.push(u):i[i.length-1].push([u]);var f=i.length-1,l=e,h=n[e].point;for(h.push(n[e].isExteriorRing),u[0].push(h);l>=e;)o[l]=!0,n[l].left?(n[l].resultInOut=!1,n[l].contourId=f):(n[l].otherEvent.resultInOut=!0,n[l].otherEvent.contourId=f),l=n[l].pos,o[l]=!0,n[l].point.push(n[l].isExteriorRing),u[0].push(n[l].point),l=v(l,n,o);l=-1===l?e:l,o[l]=o[n[l].pos]=!0,n[l].otherEvent.resultInOut=!0,n[l].otherEvent.contourId=f}return i.forEach(function(t,e,r){t.forEach(function(t,n,o){t.forEach(function(t,i,u){if("number"==typeof t[0])u[i]=t.slice(0,2);else{var f=t[0].map(function(t){return[t[0],t[1]]});r[e].push(f),o.splice(n,1)}})})}),i}function v(t,e,r){for(var n=t+1,o=e.length;o>n&&I(e[n].point,e[t].point);){if(!r[n])return n;n+=1}for(n=t-1;r[n];)n-=1;return n}function g(t,e,r){var n=null;return t.length*e.length===0&&(r===x?n=S:r===R?n=t:(r===N||r===j)&&(n=0===t.length?e:t)),n}function _(t,e,r,n,o){var i=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(o===x?i=S:o===R?i=t:(o===N||o===j)&&(i=t.concat(e))),i}function d(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var n=g(t,e,r);if(n)return n===S?null:n;var o=[1/0,1/0,-(1/0),-(1/0)],u=[1/0,1/0,-(1/0),-(1/0)],f=i(t,e,o,u);if(n=_(t,e,o,u,r))return n===S?null:n;var l=c(f,t,e,o,u,r);return p(l)}var y=t("tinyqueue"),E=t("functional-red-black-tree"),k=t("./edge_type"),w=t("./sweep_event"),b=t("./compare_events"),O=t("./compare_segments"),m=t("./segment_intersection"),I=t("./equals"),x=0,N=1,R=2,j=3,S=[],T=Math.max,A=Math.min,M=0;e.exports=d,e.exports.union=function(t,e){return d(t,e,N)},e.exports.diff=function(t,e){return d(t,e,R)},e.exports.xor=function(t,e){return d(t,e,j)},e.exports.intersection=function(t,e){return d(t,e,x)},e.exports.operations={INTERSECTION:x,DIFFERENCE:R,UNION:N,XOR:j},e.exports.fillQueue=i,e.exports.computeFields=u,e.exports.subdivideSegments=c,e.exports.divideSegment=h,e.exports.possibleIntersection=l},{"./compare_events":4,"./compare_segments":5,"./edge_type":6,"./equals":7,"./segment_intersection":9,"./sweep_event":11,"functional-red-black-tree":2,tinyqueue:3}],9:[function(t,e,r){"use strict";function n(t,e){return t[0]*e[1]-t[1]*e[0]}function o(t,e){return t[0]*e[0]+t[1]*e[1]}var i=1e-9;e.exports=function(t,e,r,u,f){function l(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var h=[e[0]-t[0],e[1]-t[1]],c=[u[0]-r[0],u[1]-r[1]],s=[r[0]-t[0],r[1]-t[1]],a=n(h,c),p=a*a,v=o(h,h),g=o(c,c);if(p>i*v*g){var _=n(s,c)/a;if(0>_||_>1)return null;var d=n(s,h)/a;return 0>d||d>1?null:f?null:[l(t,_,h)]}var y=o(s,s);if(a=n(s,h),p=a*a,p>i*v*y)return null;var E=o(h,s)/v,k=E+o(h,c)/v,w=Math.min(E,k),b=Math.max(E,k);return 1>=w&&b>=0?1===w?f?null:[l(t,w>0?w:0,h)]:0===b?f?null:[l(t,1>b?b:1,h)]:f&&0===w&&1===b?null:[l(t,w>0?w:0,h),l(t,1>b?b:1,h)]:null}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])}},{}],11:[function(t,e,r){"use strict";function n(t,e,r,n,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=n,this.type=o||i.NORMAL,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0}var o=t("./signed_area"),i=t("./edge_type");n.prototype={isBelow:function(t){return this.left?o(this.point,this.otherEvent.point,t)>0:o(this.otherEvent.point,this.point,t)>0},isAbove:function(t){return!this.isBelow(t)},isVertical:function(){return this.point[0]===this.otherEvent.point[0]}},e.exports=n},{"./edge_type":6,"./signed_area":10}]},{},[1])(1)});